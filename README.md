# MapReduce Implementation

---
### Status
The code contains all necessarry functions and generates the expected output successfully.

---
### How to Run the Code 
In order to execute the code use below command in the terminal->
```bash
$ make clean
$ make
$ ./run-mapreduce counter input-alice30.txt 4
$ ./run-mapreduce finder input-alice30.txt 4 Alice
```

NOTE -> IF YOU ENCOUNTER PERMISSION DENIED ERROR THEN GIVE BELOW COMMAND
First come out to the base folder
```bash
$ chmod u+w MapReduce
```
---

### Description of the Code

This project implements a simplified MapReduce framework with two user-defined tasks: **Letter Counter** and **Word Finder**. It includes the following main components:

---

## **1. Main Components**

### `main.c`
- **Purpose**: Serves as the test driver program for the MapReduce framework. It sets up the MapReduce specifications and executes the tasks.
- **Key Functions**:
  - **`str_is_decimal_num`**: Verifies if a string is a valid decimal number.
  - **`is_regular_file`**: Checks if the given path refers to a regular file.
  - **`print_usage`**: Displays usage instructions for running the program.
  - **`main`**: Parses command-line arguments, initializes the MapReduce task (Letter Counter or Word Finder), and executes the MapReduce workflow.

---

### `usr_functions.c`
- **Purpose**: Contains user-defined `map` and `reduce` functions for the two tasks:
  - **Letter Counter**: Counts occurrences of each letter in the input data.
  - **Word Finder**: Searches for occurrences of a specific word in the input data.

- **Key Functions**:
  - **`letter_counter_map`**: Maps each data split to counts of letters (case-insensitive).
  - **`letter_counter_reduce`**: Reduces the intermediate results by aggregating letter counts across splits.
  - **`word_finder_map`**: Maps each data split to lines containing the specified word.
  - **`word_finder_reduce`**: Merges intermediate files containing lines with the word into the final result.

---

### `mapreduce.c`
- **Purpose**: Implements the core MapReduce framework, handling the following steps:
  1. Partitioning the input file into splits.
  2. Forking processes for the `map` phase.
  3. Managing intermediate files generated by map workers.
  4. Forking a process for the `reduce` phase.
  5. Generating the final output file and cleanup.

- **Key Functions**:
  - **`mapreduce`**: Orchestrates the entire MapReduce workflow, from splitting input data to aggregating results.
  - **Intermediate File Handling**: Automatically manages intermediate data files and ensures proper cleanup.

---

### Test Cases and Logs


1. **Test Case 1** <br> 
   **Description:** 
   ```bash
   $ ./run-mapreduce counter input-moon10.txt 4
   ```
   **Output:**<br>
   ```bash
    ***** RESULT ***** 
    Result file: mr.rst
    Map worker pids: 770525 770526 770527 770528 
    Reduce worker pid: 770529
    Processing time (us): 26901
   ```

   mr.rst ->
  A 32630
  B 7444
  C 13776
  D 16744
  E 55968
  F 10032
  G 6947
  H 25884
  I 30940
  J 940
  K 2036
  L 17721
  M 10213
  N 29622
  O 31985
  P 8570
  Q 581
  R 25461
  S 26567
  T 42192
  U 11895
  V 4129
  W 8550
  X 1031
  Y 6522
  Z 270


**Status:** Working as expected.

2. **Test Case 2** <br> 
   **Description:** 
   ```bash
   $ ./run-mapreduce counter input-warpeace.txt 4
   ```
   **Output:**<br>
  ```bash
  ***** RESULT ***** 
  Result file: mr.rst
  Map worker pids: 773617 773618 773619 773620 
  Reduce worker pid: 773621
  Processing time (us): 116267
  ```

   mr.rst ->
A 210858
B 36749
C 63180
D 117759
E 313171
F 54497
G 53054
H 171161
I 172657
J 2485
K 22650
L 96051
M 61289
N 183139
O 191489
P 49163
Q 2320
R 151191
S 162131
T 224513
U 64916
V 26787
W 58932
X 4034
Y 45944
Z 2387

**Status:** Working as expected.

3. **Test Case 3** <br> 
   **Description:** 
   ```bash
   $ ./run-mapreduce counter input-alice30.txt 4
   ```
   **Output:**<br>
  ```bash
  ***** RESULT ***** 
  Result file: mr.rst
  Map worker pids: 783515 783516 783517 783518 
  Reduce worker pid: 783519
  Processing time (us): 24993
  ```

   mr.rst ->
A 8791
B 1475
C 2399
D 4931
E 13574
F 2001
G 2531
H 7374
I 7514
J 146
K 1158
L 4716
M 2107
N 7016
O 8146
P 1524
Q 209
R 5437
S 6500
T 10689
U 3468
V 846
W 2675
X 148
Y 2264
Z 78

**Status:** Working as expected.


4. **Test Case 4** <br> 
   **Description:** 
   ```bash
   $ ./run-mapreduce finder input-alice30.txt 4 Alice
   ```
   **Output:**<br>
  ```bash
  ***** RESULT ***** 
  Result file: mr.rst
  Map worker pids: 785072 785073 785074 785075 
  Reduce worker pid: 785076
  Processing time (us): 20214
  ```

**Status:** Working as expected.
